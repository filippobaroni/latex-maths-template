\RequirePackage{tikz}
\usetikzlibrary{math,calc}

\tikzset{
@filbar/.is family,
@filbar/continue arc from center and two points/.style n args={4}{insert path={
let
\p1=(#1),
\p2=($(#2)-(\p1)$),
\p3=($(#3)-(\p1)$),
\n2={atan2(\y2,\x2)},
\n3={atan2(\y3,\x3)},
\n1={ifthenelse(\n2>\n3,\n3+360*((#4)>0),\n3-360*((#4)<0))},
\n4={veclen(\p2)}
in
arc[radius=\n4,start angle=\n2,end angle=\n1]
}},
@filbar/arc from center and two points/.style n args={4}{insert path={
(#2) [@filbar/continue arc from center and two points={#1}{#2}{#3}{#4}]
}},
pics/filbar@bullet slice/.style n args={3}{code={
\tikzmath{
\a=#1;
\b=#2;
\bma=(\b-\a)/2;
\apb=(\a+\b)/2;
\r=#3;
\g=\r/10;
\rnd=\r/4;
}
\coordinate (A) at (\apb:{\g pt/sin(\bma)});
\coordinate (B) at ($(A)+(\a:{\rnd pt*abs(cot(\bma))})$);
\coordinate (C) at ($(A)+(\apb:{\rnd pt/cos(\bma)*abs(cot(\bma))})$);
\coordinate (F) at ($(\a:{sqrt((\r+\g)*(\r-\g-2*\rnd))*1pt})+(\a+90:\g pt+\rnd pt)$);
\coordinate (D) at ($(F)+(\a-90:\rnd pt)$);
\path let \p1=(F) in (${\r/veclen(\p1)}*(\p1)$) coordinate (E);
\foreach \coord in {B,D,E,F} {
\coordinate (\coord') at ($2*(0,0)!(\coord)!(A)-(\coord)$);
}
% DEBUG: show all coordinates
% \foreach \coord in {A,B,B',C,D,E,F,D',E',F'} {
% \fill (\coord) circle (.1 pt) node [right,scale=.1] {$\coord$};
% }
\path[pic actions] [@filbar/arc from center and two points={C}{B'}{B}{(2*(mod(\b-\a+360,360)<180)-1)}] -- (D) [@filbar/continue arc from center and two points={F}{D}{E}{1}] [@filbar/continue arc from center and two points={0,0}{E}{E'}{1}] [@filbar/continue arc from center and two points={F'}{E'}{D'}{1}] -- (B'); 
}},
}

% \FilBarBulletPoint{<level (1-4)>}
\NewDocumentCommand{\FilBarBulletPoint}{m}{
\begin{tikzpicture}[baseline=-2.5pt,evaluate={\lev=int(#1);}]
\foreach \i in {1,...,\lev} {
\pic[fill=filbar theme color] {filbar@bullet slice={(\i+1)*90-35}{(\i+1)*90+35}{2pt}};
}
\ifnumless{\lev}{4}{
\pic[fill=black] {filbar@bullet slice={(\lev+1)*90+35}{2*90-35+360}{1.95pt}};
}{}
\end{tikzpicture}
}
